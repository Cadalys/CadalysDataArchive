<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
  		<title>Cadalys Data Archive</title>
  		<link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  		<link href="css/bootstrap.min.css" rel="stylesheet">
  		<link href="css/styles.css" rel="stylesheet">
  		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="deployBtn.js"></script>
		<script>
			$(document).ready( function(){
	            var deployHref = window.deployBtnLocation;
	            $(".btnDeploy").attr("href",deployHref);
	        });
		</script>
		<style>
			h1.title{
				text-align:left;
				font-size: 32px;
			    font-weight: 400;
			    margin-top:-20px;
			}
			.content_desc img{
				margin-bottom: 15px;
    			margin-top: 10px;
			}
			.description{
				max-width:100%;
			}
			.platform_title{
				font-weight: bold;
				font-size: 18px;
			}
			.platform_title img{
				width:90px;
				height:auto;
			}
			h2.title{
				text-align: left;
			    font-size: 22px;
			    font-weight: 400;
			    margin-bottom:-15px;
			    color:rgb(0,132,20);
			}
			.titleMarg{
				padding-top:15px;
			}
		</style>
	</head>
	<body>
		<div class="navbar navbar-default navbar-static-top" role="navigation">
			<div class="container">
			    <div class="navbar-header">
			        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
			        <a class="navbar-brand" href="index.html"><img class="img_logo" src="images/logo.png" /></a> </div>
			    <div class="navbar-collapse collapse">
			    <ul class="nav navbar-nav">
			        <li><a href="walkthrough.html">Walkthrough</a></li>
			        <li><a href="architecture.html">Architecture</a></li>
			        <li><a href="setup.html">Setup</a></li>
			    </ul>
			    <ul class="nav navbar-nav navbar-right">
			        <li><a target="_blank" href="https://github.com/Cadalys/CadalysDataArchive"><img src="images/github.png" style="border: none;margin: -4px 0;height: 28px;width: 28px;"> GitHub
          Project</a></li>
			    </ul>
			    </div>
			</div>
		</div>
		<div class="jumbotron">
			<div class="container center">
			  	<p class="img_text">Cadalys Data Archive&#8482;</p>
			  	<a href="#" class="btnDeploy"><span>Deploy to Heroku</span></a>
		  	</div>
		  </div>
		</div>
		<div class="content_desc">
			<div class="container">
				<h1 class="title">Setup</h1>
				<div class="description">
					<p>Cadalys Data Archive&#8482; is a powerful and robust data archiving application enabling enterprises to improve performance and storage utilization by archiving older unused data out of Salesforce. The application supports both standard and custom objects, and lets you define archiving rules based on any criteria. You can also unarchive records that you need to have back in Salesforce. </p>
					<p>To setup the application, please follow the instructions below. Cadalys is also available to help you to install the solution.</p>
					<img style="max-width:100%;" src="images/tip1.png" />
				</div>
				<h2 class="title">Install the Heroku App</h2>
				<div class="description">
					<p>1. Deploy the app by clicking the "Deploy to Heroku" Button.</p>
					<a href="#" class="btnDeploy" style="margin: 10px 0 10px;"><span>Deploy to Heroku</span></a>
				</div>
				
				<div class="description titleMarg">
					<p>2. Create the app in your Heroku account (for example <i>CadalysDataArchive</i>).</p>
				</div>
				<img style="max-width:100%;" src="images/createApp.png" />
				<div class="description titleMarg">
					<p>3. After the app has been deployed, you can manage it in the Heroku Dashboard by clicking the "Manage App" button.</p>
				</div>
				<img style="max-width:100%;" src="images/free.png" />
				<div class="description titleMarg">
					<p>4. Click on Heroku Connect to setup the connection with your Salesforce org.</p>
				</div>
				<img style="max-width:100%;" src="images/heroku1.png" />
				<div class="description titleMarg">
					<p>Press the "Setup Connection" button.</p>
				</div>
				<img style="max-width:100%;" src="images/heroku2.png" />
				<div class="description titleMarg">
					<p>5. The Heroku Connect Provision Connection screen appears </p>
				</div>
				<img style="max-width:100%;" src="images/setup5.png" />
				<div class="description titleMarg">
					<p>6. Click the "Next" button and then click Authorize.</p>
				</div>
				<img style="max-width:100%;" src="images/setup6.png" />
				<div class="description titleMarg">
					<p>7. Authorize Heroku Connect to access your Salesforce org. If asked, log in to Salesforce.</p>
				</div>
				<img style="max-width:100%;" src="images/setup7.png" />
				<h2 class="title">Install the Salesforce package</h2>
				<div class="description">
					<p>1. Install the Salesforce package by clicking the following button.</p>
					<a href="#" class="btnSalesforce" style="margin-bottom:15px;"><span>Deploy Salesforce Components</span></a>
				</div>
				<img style="max-width:100%;" src="images/install1.png" />
				<img style="max-width:100%;" src="images/install11.png" />
				<div class="description titleMarg">
					<p>2. Populate the "Archiving Setting" and "Heroku Connect Setting" Custom Setting in Salesforce.<br/> You can fill out the custom settings manually or run the following script in the Developer Console. You can download this script here:<br/><a href="js/script1.txt" download>>>>Download script<<<</a></p>
					<p>
						Please note, that some of the parameters should be filled with your specific values:<br/> 
						"Heroku Connect Setting": 'APP_NAME', 'AUTH_TOKEN'<br/>
						"Archiving Setting": 'SERVICE_ENDPOINT', 'SERVICE_USER', 'SERVICE_PASSWORD'
					</p>
					
				</div>
				<div class="description titleMarg">
					<p>2.1 Manual setup of the Custom Setting: <b>Archiving Setting</b></p>
				</div>
				<img style="max-width:100%;" src="images/install21.png" />
				<img style="max-width:100%;" src="images/install22.png" />
				<div class="description titleMarg">
					<p>2.2 Manual setup of the Custom Setting: <b>Heroku Connect Setting</b></p>
				</div>
				<img style="max-width:100%;" src="images/install23.png" />
				<img style="max-width:100%;" src="images/install24.png" />
				<div class="description titleMarg">
					<p>2.3 Manual setup of the Custom Setting: <b>Heroku Connect Setting.AUTH_TOKEN</b></p>
				</div>
				<div class="description titleMarg">
					<p>This setting is used to enable automatic Heroku mapping for Archived Objects.<br/>
					In order to use this feature you must install <a href="https://toolbelt.heroku.com/">Heroku toolbelt</a>.<br/> 
					Click here to get an <a href="https://devcenter.heroku.com/articles/authentication">API Token</a> for your Heroku instance.<br/>
					Enter your token in the AUTH_TOKEN setting.
					</p>
				</div>
				<div class="description titleMarg">
					<p>2.4 Cadalys Data Archive will automatically give you the option of archiving child objects where the relationship between the parent and children is a Master Detail relationship. If you would like the ability to archive additional child records for an object, enter the information about the child object in this Custom Setting. Enter a name for the relationship, the API name of the child object, the API name of the field on the child object that points to the parent, and the API name of the parent object:</p>
				</div>
				<img style="max-width:100%;" src="images/install25.png" />
				<div class="description titleMarg">
					<p>3. Set up the Remote Site Details</p>
				</div>
				<div class="description" style="padding-top:0;">
					<p>3.1 Create new <a href="https://ap2.salesforce.com/0rp?spl1=1&setupid=SecurityRemoteProxy&retURL=%2Fui%2Fsetup%2FSetup%3Fsetupid%3DSecurity">Remote Site Settings</a> for the Heroku services  under Setup | App Setup | Develop | Remote Access.</p>
				</div>
				<img style="max-width:100%;" src="images/install31.png" />
				<div class="description titleMarg">
					<p>3.2 Create new <a href="https://ap2.salesforce.com/0rp?spl1=1&setupid=SecurityRemoteProxy&retURL=%2Fui%2Fsetup%2FSetup%3Fsetupid%3DSecurity">Remote Site Settings</a> for Metadata Api<br/>
						Remote Site URL: <xmp style="display:inline;margin:0;">https://c.<instance number>.visual.force.com,</xmp> e.g. <text style="color:rgb(31,142,213);">https://c.ap2.visual.force.com</text>.
					</p>
				</div>
				<img style="max-width:100%;" src="images/install31.png" />
				<div class="description titleMarg">
					<p>4. On the Heroku side create a mapping for the settings objects</p>
				</div>
				<div class="description" style="padding-top:0;">
					<p>4.1	Map the cadarch__Archiving_Setting__c object</p>
					<p>Click Create Mapping.<br/>
					Select the cadarch__Archiving_Setting__c object and check all fields<br/>
					In the Salesforce -> Database section, select the <b>Listen for updates using the Streaming API</b> option.<br/>Click Save.
					</p>
				</div>
				<img style="max-width:100%;" src="images/install41.png" />
				<div class="description titleMarg">
					<p>4.2	Map the cadarch__Archive_Plan__c object, select all of the fields and select the <b>Listen for updates using the Streaming API</b> option.</p>
				</div>
				<img style="max-width:100%;" src="images/install42.png" />
				<div class="description titleMarg">
					<p>4.3	If you do not setup the AUTH_TOKEN setting (2.3), you need to create a mapping for each of the objects you would like to archive.</p>
				</div>
				<img style="max-width:100%;" src="images/install43.png" />
				<div class="description titleMarg">
					<p>5. Schedule the Archiving batch StartArchivingScheduler in Salesforce. You can also start the archiving process, by clicking the Run button on the Archiving Rules tab.</p>
					<img style="max-width:100%;" src="images/tip3.png" />
				</div>
				<img style="max-width:100%;" src="images/install5.png" />
				<div class="description titleMarg">
					<p>6. Schedule the batch DeleteArchivePlanScheduler to run once a week. It will clean-up old archiving plans. This batch should run not less than 1 hour before the Archiving batch.</p>
				</div>
				<div class="description titleMarg">
					<p>7. Add the "Search Cadalys Data Archive" widget to the Home Page Layout by going to Setup | Customize | Home | Home Page Layouts.</p>
				</div>
				<img style="max-width:100%;" src="images/install6.png" />
				<div class="description titleMarg">
					<p>8. If you want to see the "Search Cadalys Data Archive" widget on all of the pages, check Show Custom Sidebar Components on All Pages in User Interface settings by going to Setup | Customize | User Interface.</p>
				</div>
				<img style="max-width:100%;" src="images/tip.png" />
				<div class="description titleMarg">
					<p>You are now ready to begin using Cadalys Data Archive&#8482;! </p>
					<p>To view archived objects in Salesforce and to be able to unarchive them, please proceed with the following steps.</p>
				</div>
				<h2 class="title">Configure External Objects</h2>
				<div class="description">
					<p>To see the archived objects in Salesforce, configure External objects on Heroku Connect:</p>
				</div>
				<div class="description titleMarg">
					<p>1. Create a support ticket in Heroku, asking to enable External objects for your installed Cadalys Data Archive application.</p>
				</div>
				<div class="description titleMarg">
					<p>2. When the ticket is processed, you will see a new tab named External Objects. Click the External Objects tab and click the "Activate" button.</p>
				</div>
				<img style="max-width:100%;" src="images/configure2.png" />
				<div class="description titleMarg">
					<p>3. After activation, you will receive an email with the username and password for access to your External Objects.</p>
				</div>
				<img style="max-width:100%;" src="images/configure3.png" />
				<div class="description titleMarg">
					<p>4. After running the archiving batch process in Salesforce, you will see the archived objects in Heroku. In order to see these archived records in Salesforce, select them in the External Objects tab. Archived objects will have an "a__" prefix.</p>
				</div>
				<img style="max-width:100%;" src="images/configure4.png" />
				<div class="description titleMarg">
					<p>5. In Salesforce, go to Setup | Develop | External Data Sources, Click "New External Data Source" and fill in the fields in accordance with the External Objects settings in step 3.</p>
				</div>
				<img style="max-width:100%;" src="images/configure5.png" />
				<div class="description titleMarg">
					<p>6. Click Validate and Sync, select the appropriate salesforce.a__* objects, and click the "Sync" button.</p>
				</div>
				<img style="max-width:100%;" src="images/configure6.png" />
				<div class="description titleMarg">
					<p><span style="vertical-align:top;">7.</span> <img style="max-width:100%;margin-top:7px;margin-left:7px;" src="images/tip2.png" /></p>
				</div>
				<img style="max-width:100%;" src="images/configure7.png" />
				<div class="description titleMarg">
					<p>8. You can set up the Page Layouts for archived objects as with the Page Layouts for any object in Salesforce. You can also configure a custom ParentExtID field as an External Lookup, which will enable you to configure Related lists for Archived objects.</p>
				</div>
				<img style="max-width:100%;" src="images/configure8.png" />
				<div class="description titleMarg">
					<p>9. Create tabs for the external objects as desired. Please note that, as with standard Salesforce, archived object search results will be visible for those users who have access to the external object tabs. In other words, as with standard Salesforce Search, the search result for searching the Cadalys Data Archive will only show the types of records for which the User has tabs. If a User does not have a tab for "Archived Cases", for example, they will not see Archived Cases in the search results for searching the Cadalys Data Archive.</p>
				</div>
				<div class="description titleMarg">
					<p>10.	Add the Unarchive button to the Page Layout for any external object that you want users to be able to unarchive.<br/> 
					Go to Setup | Develop | External Object and choose the object.<br/>
					In the "Buttons, Links, and Actions" area, click the "New Button or Link" button.
					</p>
				</div>
				<img style="max-width:100%;" src="images/configure9.png" />
				<div class="description titleMarg">
					<p>Create the Unarchive button with the parameters shown below.<br/>
					<a href="js/script2.txt" download>>>Download Java Script<<</a>
					</p>
				</div>
				<img style="max-width:100%;" src="images/configure10.png" />
				<img style="max-width:100%;margin-bottom:70px;" src="images/tip4.png" />
				<!--<h2 class="title">Additional Tips</h2>
				<div class="description">
					<p>1.	If you want to see the "Search Cadalys Data Archive" widget on all the pages, check <i>Show Custom Sidebar Components on All Pages</i> in User Interface settings</p>
				</div>
				<img style="max-width:100%;margin-bottom:70px;" src="images/tip.png" />-->
			</div>
		</div>
		<div class="footer">
			<div class="container">
				<p>© 2016 Cadalys Data Archive. Heroku and Salesforce are trademarks of salesforce.com, inc.</p>
			</div>
		</div>
	</body>
</html>