<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
  		<title>Cadalys</title>
  		<link href="css/bootstrap.min.css" rel="stylesheet">
  		<link href="css/styles.css" rel="stylesheet">
  		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="deployBtn.js"></script>
		<script>
			$(document).ready( function(){
	            var deployHref = window.deployBtnLocation;
	            $(".btnDeploy").attr("href",deployHref);
	        });
		</script>
		<style>
			h1.title{
				text-align:left;
				font-size: 32px;
			    font-weight: 400;
			    margin-top:-20px;
			}
			.content_desc img{
				margin-bottom: 15px;
    			margin-top: 10px;
			}
			.description{
				max-width:100%;
			}
			.platform_title{
				font-weight: bold;
				font-size: 18px;
			}
			.platform_title img{
				width:90px;
				height:auto;
			}
			h2.title{
				text-align: left;
			    font-size: 20px;
			    font-weight: 400;
			    margin-bottom:-15px;
			    color:#2e74cf;
			}
			.titleMarg{
				padding-top:15px;
			}
			.githubImg{
				background: url('images/github.png');
			    background-size: auto 50px;
			    background-repeat: no-repeat;
			    height: 50px;
			    width: 175px;
			}
		</style>
	</head>
	<body>
		<div class="navbar navbar-default navbar-static-top" role="navigation">
			<div class="container">
			    <div class="navbar-header">
			        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
			        <a class="navbar-brand" href="index.html"><img class="img_logo" src="images/logo.png" /></a> </div>
			    <div class="navbar-collapse collapse">
			    <ul class="nav navbar-nav">
			        <li><a href="walkthrough.html">Walkthrough</a></li>
			        <li><a href="architecture.html">Architecture</a></li>
			        <li><a href="setup.html">Setup</a></li>
			    </ul>
			    <ul class="nav navbar-nav navbar-right">
			        <li><a target="_blank" class="githubImg" href="https://github.com/Cadalys/CadalysDataArchive"></a></li>
			    </ul>
			    </div>
			</div>
		</div>
		<div class="jumbotron">
			<div class="container center">
			  	<p class="img_text">Cadalys Data Archive&#8482;</p>
			  	<a href="#" class="btnDeploy"><span>Deploy to Heroku</span></a>
		  	</div>
		  </div>
		</div>
		<div class="content_desc">
			<div class="container">
				<h1 class="title">Setup</h1>
				<div class="description">
					<p>Cadalys Data Archive&#8482; is a powerful application with a number of tools providing flexible and customizable archiving process.</p>
					<p>To setup the application please follow the instructions below or contact Cadalys to help you to install the solution.</p>
				</div>
				<h2 class="title">Install Heroku app</h2>
				<div class="description">
					<p>1. Deploy the app by clicking the Deploy Button</p>
				</div>
				<img style="max-width:100%;" src="images/button.png" />
				<div class="description titleMarg">
					<p>2. Create the app on Heroku account. Let’s say <i>CadalysDataArchive</i></p>
				</div>
				<img style="max-width:100%;" src="images/createApp.png" />
				<div class="description titleMarg">
					<p>3. After the app has been deployed, you can manage it in the Heroku Dashboard. For this, click on Manage App.</p>
				</div>
				<img style="max-width:100%;" src="images/free.png" />
				<div class="description titleMarg">
					<p>4. Click on Heroku Connect to setup connection with your Salesforce org.</p>
				</div>
				<img style="max-width:100%;" src="images/heroku1.png" />
				<div class="description titleMarg">
					<p>And press the Setup Connection button</p>
				</div>
				<img style="max-width:100%;" src="images/heroku2.png" />
				<div class="description titleMarg">
					<p>5. The Heroku Connect Provision Connection screen appears </p>
				</div>
				<img style="max-width:100%;" src="images/setup5.png" />
				<div class="description titleMarg">
					<p>6. Click Next and then click Authorize.</p>
				</div>
				<img style="max-width:100%;" src="images/setup6.png" />
				<div class="description titleMarg">
					<p>7. Authorize Heroku Connect to access your Salesforce org. If asked, log in to Salesforce.</p>
				</div>
				<img style="max-width:100%;" src="images/setup7.png" />
				<h2 class="title">Install Salesforce package</h2>
				<div class="description">
					<p>1. Install the SF package by clicking the button</p>
				</div>
				<img style="max-width:100%;" src="images/install1.png" />
				<img style="max-width:100%;" src="images/install11.png" />
				<div class="description titleMarg">
					<p>2. Fill all necessary custom settings on the Salesforce side Please fill the custom settings manually or use the script <a href="js/script1.txt" download>>>>Download script<<<</a>.</p>
					
				</div>
				<div class="description titleMarg">
					<p>2.1 Custom Setting: <b>Archiving Setting</b></p>
				</div>
				<img style="max-width:100%;" src="images/install21.png" />
				<img style="max-width:100%;" src="images/install22.png" />
				<div class="description titleMarg">
					<p>2.2 Custom Setting: <b>Heroku Connect Setting</b></p>
				</div>
				<img style="max-width:100%;" src="images/install23.png" />
				<img style="max-width:100%;" src="images/install24.png" />
				<div class="description titleMarg">
					<p>2.3 Custom Setting: Heroku Connect Setting.AUTH_TOKEN</p>
				</div>
				<div class="description titleMarg">
					<p>This setting is used to provide possibility to create Heroku mapping for Archived Objects automatically.<br/>
					In order to use this feature you need to install <a href="https://toolbelt.heroku.com/">Heroku toolbelt</a>.<br/> 
					Get <a href="https://devcenter.heroku.com/articles/authentication">API Token</a> for your Heroku instance.<br/>
					Enter your token in the <a href="https://na22.salesforce.com/a0E1500000R2uYr?setupid=CustomSettings">AUTH_TOKEN</a> setting.
					</p>
				</div>
				<div class="description titleMarg">
					<p>2.4 Standard Relationships custom setting is used to save the exceptional relationships between Master and Detail standard objects. Fill this setting if you want to have additional child objects in the Archiving Rule page.</p>
				</div>
				<img style="max-width:100%;" src="images/install25.png" />
				<div class="description titleMarg">
					<p>3. Fill Remote Site Details</p>
				</div>
				<div class="description" style="padding-top:0;">
					<p>3.1 Create new Remote Site Settings for Heroku services</p>
				</div>
				<img style="max-width:100%;" src="images/install31.png" />
				<div class="description titleMarg">
					<p>3.2 Create new Remote Site Settings for Metadata Api<br/>
						Remote Site URL: <xmp style="display:inline;margin:0;">https://c.<instance number>.visual.force.com,</xmp> e.g. <text style="color:rgb(31,142,213);">https://c.ap2.visual.force.com</text>.
					</p>
				</div>
				<img style="max-width:100%;" src="images/install31.png" />
				<div class="description titleMarg">
					<p>4. On Heroku side create a mapping for the settings objects</p>
				</div>
				<div class="description" style="padding-top:0;">
					<p>4.1	Map cadarch__Archiving_Setting__c object</p>
					<p>Click Create Mapping.<br/>
					Select the cadarch__Archiving_Setting__c object and check all fields<br/>
					In the Salesforce -> Database section, select the <b>Listen for updates using the Streaming API</b> option.<br/>Click Save.
					</p>
				</div>
				<img style="max-width:100%;" src="images/install41.png" />
				<div class="description titleMarg">
					<p>4.2	Analogically map cadarch__Archive_Plan__c object, checking all the fields</p>
				</div>
				<img style="max-width:100%;" src="images/install42.png" />
				<div class="description titleMarg">
					<p>4.3	If you do not setup the <a href="https://na22.salesforce.com/a0E1500000R2uYr?setupid=CustomSettings">AUTH_TOKEN</a> setting (2.3), you need to create a mapping for all the objects you would like to archive.</p>
				</div>
				<img style="max-width:100%;" src="images/install43.png" />
				<div class="description titleMarg">
					<p>5. Schedule the Archiving batch DataArchivingScheduler. You can also start the archiving process, by clicking the Run button on the Archiving Rules tab.</p>
				</div>
				<div class="description titleMarg">
					<p>6. Add "Search Cadalys Data Archive" widget to the Home Page Layout.</p>
				</div>
				<img style="max-width:100%;" src="images/install6.png" />
				<div class="description titleMarg">
					<p>Now you are done! You can start archiving unused data out of Salesforce!</p>
					<p>To make it possible to see the archived objects in Salesforce and unarchive them, please proceed with the next steps.</p>
				</div>
				<h2 class="title">Configure External Objects</h2>
				<div class="description">
					<p>To see the archived objects in Salesforce, External objects on Heroku Connect should be configured:</p>
				</div>
				<div class="description titleMarg">
					<p>1. Create a support ticket in Heroku, asking to enable External objects for your installed Data Archive application.</p>
				</div>
				<div class="description titleMarg">
					<p>2. When the ticket is processed, you will see a new tab External Objects. Click External Objects tab and click activate button</p>
				</div>
				<img style="max-width:100%;" src="images/configure2.png" />
				<div class="description titleMarg">
					<p>3. After activation, you will receive email with username and password for access to your External Objects.</p>
				</div>
				<img style="max-width:100%;" src="images/configure3.png" />
				<div class="description titleMarg">
					<p>4. After running the archiving batch, you get the archived objects in Heroku. In order to see these archived objects in Salesforce, you should mark them in the External Objects tab. Archived objects will have a prefix a__.</p>
				</div>
				<img style="max-width:100%;" src="images/configure4.png" />
				<div class="description titleMarg">
					<p>5. In Salesforce go to Develop->External Data Sources and Click New External Data Source and fill the fields in accordance to the External Objects settings (#3).</p>
				</div>
				<img style="max-width:100%;" src="images/configure5.png" />
				<div class="description titleMarg">
					<p>6. Click Validate and Sync, mark salesforce.a__* objects, click Sync</p>
				</div>
				<img style="max-width:100%;" src="images/configure6.png" />
				<div class="description titleMarg">
					<p>7. You can change the Label for the External Object, making it more user friendly. But DO NOT CHANGE the object name.</p>
				</div>
				<img style="max-width:100%;" src="images/configure7.png" />
				<div class="description titleMarg">
					<p>8. Create tabs for the external objects. Please note, that archived object search results will be visible for those users, who have access to the external object tabs.</p>
				</div>
				<div class="description titleMarg">
					<p>9. Add the Unarchive button for any external object.<br/> 
					Go to Develop->External Object and choose the object.<br/>
					In the "Buttons, Links, and Actions" area, click New Button or Link
					</p>
				</div>
				<img style="max-width:100%;" src="images/configure9.png" />
				<div class="description titleMarg">
					<p>Create the Unarchive button with the parameters shown below.<br/>
					<a href="js/script2.txt" download>>>Download Java Script<<</a>
					</p>
				</div>
				<img style="max-width:100%;" src="images/configure10.png" />
				<h2 class="title">Additional Tips</h2>
				<div class="description">
					<p>1.	If you want to see the "Search Cadalys Data Archive" widget on all the pages, check <i>Show Custom Sidebar Components on All Pages</i> in User Interface settings</p>
				</div>
				<img style="max-width:100%;margin-bottom:70px;" src="images/tip.png" />
			</div>
		</div>
		<div class="footer">
			<div class="container">
				<p>© 2016 Cadalys Data Archive. Heroku and Salesforce are trademarks of salesforce.com, inc.</p>
			</div>
		</div>
	</body>
</html>